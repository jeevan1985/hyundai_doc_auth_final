/*
Theme variables and component styling for all themes.

This file defines CSS custom properties for each theme and applies them across
common UI components to ensure consistent theming.
*/

/* Local font faces to support theme typography offline */
@font-face {
  font-family: 'JetBrains Mono';
  src: url('../fonts/jetbrains-mono/jetbrains-mono-latin-400-normal.woff2') format('woff2');
  font-weight: 400; font-style: normal; font-display: swap;
}
@font-face {
  font-family: 'JetBrains Mono';
  src: url('../fonts/jetbrains-mono/jetbrains-mono-latin-700-normal.woff2') format('woff2');
  font-weight: 700; font-style: normal; font-display: swap;
}
@font-face {
  font-family: 'Orbitron';
  src: url('../fonts/orbitron/orbitron-latin-400-normal.woff2') format('woff2');
  font-weight: 400; font-style: normal; font-display: swap;
}
@font-face {
  font-family: 'Orbitron';
  src: url('../fonts/orbitron/orbitron-latin-700-normal.woff2') format('woff2');
  font-weight: 700; font-style: normal; font-display: swap;
}

:root {
  --bg: #ffffff;
  --fg: #111111;
  --muted: #666666;
  --primary: #0d6efd;
  --card: #ffffff;
  --card-border: #e5e7eb;
  --input-bg: #ffffff;
  --input-border: #ced4da;
  --table-stripe: #f8f9fa;
  --shadow: 0 1px 2px rgba(0,0,0,0.08);
  --link: #0d6efd;
  --link-hover: #0a58ca;
  --glow: none;
  --heading-font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --body-font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

:root[data-theme="default"],
:root:not([data-theme]),
:root[data-theme="auto"] {
  --bg: #ffffff;
  --fg: #111111;
  --muted: #666666;
  --primary: #0d6efd;
  --card: #ffffff;
  --card-border: #e5e7eb;
  --input-bg: #ffffff;
  --input-border: #ced4da;
  --table-stripe: #f8f9fa;
  --shadow: 0 1px 2px rgba(0,0,0,0.08);
  --link: #0d6efd;
  --link-hover: #0a58ca;
  --glow: none;
  --heading-font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --body-font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

@media (prefers-color-scheme: dark) {
  :root[data-theme="auto"], :root:not([data-theme]) {
    --bg: #0f1115;
    --fg: #e6e7eb;
    --muted: #a1a1aa;
    --primary: #3b82f6;
    --card: #161a20;
    --card-border: #2a2f3a;
    --input-bg: #0f1115;
    --input-border: #2a2f3a;
    --table-stripe: #111827;
    --shadow: 0 2px 6px rgba(0,0,0,0.4);
    --link: #93c5fd;
    --link-hover: #60a5fa;
  }
}

:root[data-theme="light"] {
  --bg: #ffffff;
  --fg: #111111;
  --muted: #666666;
  --primary: #0d6efd;
  --card: #ffffff;
  --card-border: #e5e7eb;
  --input-bg: #ffffff;
  --input-border: #ced4da;
  --table-stripe: #f8f9fa;
  --shadow: 0 1px 2px rgba(0,0,0,0.08);
  --link: #0d6efd;
  --link-hover: #0a58ca;
  --glow: none;
}

:root[data-theme="dark"] {
  --bg: #0f1115;
  --fg: #e6e7eb;
  --muted: #a1a1aa;
  --primary: #3b82f6;
  --card: #161a20;
  --card-border: #2a2f3a;
  --input-bg: #0f1115;
  --input-border: #2a2f3a;
  --table-stripe: #111827;
  --shadow: 0 2px 6px rgba(0,0,0,0.4);
  --link: #93c5fd;
  --link-hover: #60a5fa;
  --glow: none;
}

:root[data-theme="retro"] {
  /* Retro Futurism: warm muted neon (teal/coral/orange/magenta) with softer glow */
  --bg: #21172a; /* deep aubergine */
  --fg: #fdf2ff; /* bright but soft */
  --muted: #e5c7f0; /* pastel */
  --primary: #ff8a4c; /* coral/orange accent */
  --card: rgba(33,23,42,0.92);
  --card-border: rgba(255, 200, 230, 0.22);
  --input-bg: rgba(33,23,42,0.96);
  --input-border: rgba(255, 200, 230, 0.32);
  --table-stripe: rgba(255, 138, 76, 0.08); /* warm stripe */
  --shadow: 0 6px 16px rgba(255,138,76,0.16);
  --link: #2dd4bf; /* warm teal */
  --link-hover: #22c3aa;
  --glow: 0 0 6px rgba(255,138,76,0.45);
  --heading-font: "JetBrains Mono", Menlo, Consolas, monospace;
  --body-font: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  /* Override Bootstrap body/heading/secondary color tokens to full contrast */
  --bs-body-color: var(--fg);
  --bs-heading-color: var(--fg);
  --bs-secondary-color: var(--fg);
}

:root[data-theme="cyberpunk"] {
  /* Cyberpunk: high-contrast dark base with vibrant neon (electric pink/cyan/purple/green) */
  --bg: #070711; /* near-black indigo */
  --fg: #dffbff; /* crisp cyan-tinted white */
  --muted: #92d7e0;
  --primary: #ff00e6; /* electric pink */
  --card: rgba(9,9,20,0.96);
  --card-border: rgba(0, 255, 240, 0.25);
  --input-bg: rgba(7,7,17,0.98);
  --input-border: rgba(0, 255, 240, 0.35);
  --table-stripe: rgba(0, 255, 240, 0.10); /* vivid stripe */
  --shadow: 0 10px 30px rgba(0,0,0,0.65);
  --link: #00fff0; /* neon cyan */
  --link-hover: #36ffe2;
  --glow: 0 0 12px rgba(255,0,230,0.7), 0 0 10px rgba(0,255,240,0.5);
  --heading-font: "Orbitron", "Eurostile", system-ui, sans-serif;
  --body-font: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  /* Override Bootstrap body/heading/secondary color tokens to full contrast */
  --bs-body-color: var(--fg);
  --bs-heading-color: var(--fg);
  --bs-secondary-color: var(--fg);
}

:root[data-theme="glass"] {
  --bg: #e6efff;
  --fg: #263238;
  --muted: #51606b;
  --primary: #6ea8fe;
  --card: rgba(255,255,255,0.6);
  --card-border: rgba(255,255,255,0.35);
  --input-bg: rgba(255,255,255,0.8);
  --input-border: rgba(38,50,56,0.25);
  --table-stripe: rgba(110,168,254,0.06);
  --shadow: 0 10px 30px rgba(0,0,0,0.08);
  --link: #4a86ff;
  --link-hover: #3c78ff;
  --glow: none;
  --heading-font: "SF Pro Display", Inter, system-ui, -apple-system, Segoe UI, Roboto;
  --body-font: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--body-font);
}

h1, h2, h3, h4, h5, h6, .navbar-brand {
  font-family: var(--heading-font);
}

a { color: var(--link); }
.nav-link:hover, a:hover { color: var(--link-hover); }

.navbar, .dropdown-menu {
  background-color: var(--card);
  color: var(--fg);
  border-color: var(--card-border);
}
.navbar .navbar-brand, .navbar .nav-link, .navbar .navbar-text { color: var(--fg); }
.navbar .nav-link.active, .navbar .nav-link:hover { color: var(--link-hover); }
.navbar .navbar-toggler {
  border-color: var(--card-border);
}
.navbar .navbar-toggler-icon {
  background-image: none;
  position: relative;
}
.navbar .navbar-toggler-icon::before {
  content: "";
  display: block;
  width: 100%; height: 100%;
  box-shadow: inset 0 0 0 1px var(--fg);
}

/* Theme-specific navbar backgrounds for parity across themes */
[data-theme="light"] .navbar {
  background: #ffffff;
  border-bottom: 1px solid #e5e7eb;
  box-shadow: 0 2px 8px rgba(0,0,0,0.03);
}
[data-theme="dark"] .navbar {
  background: #161a20;
  border-bottom: 1px solid #2a2f3a;
  box-shadow: 0 2px 6px rgba(0,0,0,0.4);
}
[data-theme="retro"] .navbar {
  background: linear-gradient(180deg, rgba(33,23,42,0.88), rgba(33,23,42,0.96));
  border-bottom: 1px solid rgba(255,200,230,0.22);
  box-shadow: 0 6px 16px rgba(255,138,76,0.16);
}
[data-theme="cyberpunk"] .navbar {
  background: linear-gradient(180deg, rgba(9,9,20,0.90), rgba(9,9,20,0.98));
  border-bottom: 1px solid rgba(0,255,240,0.25);
  box-shadow: 0 0 12px rgba(255,0,230,0.25), 0 0 18px rgba(0,255,240,0.12);
}
[data-theme="glass"] .navbar {
  background: rgba(255,255,255,0.6);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.35);
}

.card, .table-responsive, .modal-content, .dropdown-menu {
  background: var(--card);
  border: 1px solid var(--card-border);
  box-shadow: var(--shadow);
}

.table tbody tr:hover { background: var(--table-stripe); }
/* Theme-specific hover emphasis */
[data-theme="retro"] .table tbody tr:hover { background: color-mix(in srgb, var(--table-stripe) 80%, var(--card)); }
[data-theme="cyberpunk"] .table tbody tr:hover { background: color-mix(in srgb, var(--table-stripe) 85%, var(--card)); }

.form-control, .form-select {
  color: var(--fg);
  background: var(--input-bg);
  border-color: var(--input-border);
  caret-color: var(--fg);
}

/* Ensure strong, non-dimmed text and placeholder contrast in inputs/selects for Retro and Cyberpunk themes */
[data-theme="retro"] .form-control,
[data-theme="retro"] .form-select,
[data-theme="cyberpunk"] .form-control,
[data-theme="cyberpunk"] .form-select {
  color: var(--fg) !important;
  caret-color: var(--fg);
  opacity: 1 !important;
}

/* Placeholder color: dimmed for clarity, consistent with dark theme semantics */
[data-theme="retro"] .form-control::placeholder,
[data-theme="retro"] .form-select::placeholder,
[data-theme="cyberpunk"] .form-control::placeholder,
[data-theme="cyberpunk"] .form-select::placeholder,
[data-theme="retro"] .form-control::-webkit-input-placeholder,
[data-theme="retro"] .form-select::-webkit-input-placeholder,
[data-theme="cyberpunk"] .form-control::-webkit-input-placeholder,
[data-theme="cyberpunk"] .form-select::-webkit-input-placeholder,
[data-theme="retro"] .form-control::-moz-placeholder,
[data-theme="retro"] .form-select::-moz-placeholder,
[data-theme="cyberpunk"] .form-control::-moz-placeholder,
[data-theme="cyberpunk"] .form-select::-moz-placeholder,
[data-theme="retro"] .form-control:-ms-input-placeholder,
[data-theme="retro"] .form-select:-ms-input-placeholder,
[data-theme="cyberpunk"] .form-control:-ms-input-placeholder,
[data-theme="cyberpunk"] .form-select:-ms-input-placeholder {
  color: var(--muted) !important;
  opacity: 1 !important; /* avoid browser default opacity dimming */
}
/* Label and helper text contrast for accessibility across themes */
[data-theme="retro"] label,
[data-theme="retro"] .form-label,
[data-theme="retro"] .form-text,
[data-theme="retro"] .form-check-label,
[data-theme="cyberpunk"] label,
[data-theme="cyberpunk"] .form-label,
[data-theme="cyberpunk"] .form-text,
[data-theme="cyberpunk"] .form-check-label {
  color: var(--fg) !important;
  opacity: 1 !important;
}
/* Reinforce heading and section title contrast */
[data-theme="retro"] h1, [data-theme="retro"] h2, [data-theme="retro"] h3, [data-theme="retro"] h4, [data-theme="retro"] h5, [data-theme="retro"] h6,
[data-theme="cyberpunk"] h1, [data-theme="cyberpunk"] h2, [data-theme="cyberpunk"] h3, [data-theme="cyberpunk"] h4, [data-theme="cyberpunk"] h5, [data-theme="cyberpunk"] h6 {
  color: var(--fg) !important;
}
/* Force high contrast on form-related labels and headers */
[data-theme="retro"] .col-form-label,
[data-theme="retro"] .form-floating label,
[data-theme="retro"] legend,
[data-theme="retro"] .input-group-text,
[data-theme="retro"] .table thead th,
[data-theme="retro"] .card-title,
[data-theme="retro"] .card-header,
[data-theme="retro"] .form-label > small,
[data-theme="retro"] .text-muted,
[data-theme="cyberpunk"] .col-form-label,
[data-theme="cyberpunk"] .form-floating label,
[data-theme="cyberpunk"] legend,
[data-theme="cyberpunk"] .input-group-text,
[data-theme="cyberpunk"] .table thead th,
[data-theme="cyberpunk"] .card-title,
[data-theme="cyberpunk"] .card-header,
[data-theme="cyberpunk"] .form-label > small,
[data-theme="cyberpunk"] .text-muted {
  color: var(--fg) !important;
  opacity: 1 !important;
}
[data-theme="retro"] .input-group-text, [data-theme="cyberpunk"] .input-group-text { background: var(--input-bg); border-color: var(--input-border); }
.form-control:focus, .form-select:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--primary) 25%, transparent);
}

/* Force bright text during typing for Retro and Cyberpunk themes */
[data-theme="retro"] .form-control:focus,
[data-theme="retro"] .form-select:focus,
[data-theme="cyberpunk"] .form-control:focus,
[data-theme="cyberpunk"] .form-select:focus {
  color: var(--fg) !important;
  -webkit-text-fill-color: var(--fg);
  opacity: 1 !important;
}

/* Keep placeholders dim on focus as well (they remain placeholders until user types) */
[data-theme="retro"] .form-control:focus::placeholder,
[data-theme="retro"] .form-select:focus::placeholder,
[data-theme="cyberpunk"] .form-control:focus::placeholder,
[data-theme="cyberpunk"] .form-select:focus::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
}

/* Safari/Chrome autofill and text fill corrections */
[data-theme="retro"] input:-webkit-autofill,
[data-theme="retro"] textarea:-webkit-autofill,
[data-theme="retro"] select:-webkit-autofill,
[data-theme="cyberpunk"] input:-webkit-autofill,
[data-theme="cyberpunk"] textarea:-webkit-autofill,
[data-theme="cyberpunk"] select:-webkit-autofill {
  -webkit-text-fill-color: var(--fg) !important;
  transition: background-color 9999s ease-in-out 0s;
}

/* Form-floating label contrast while typing */
[data-theme="retro"] .form-floating > .form-control:focus ~ label,
[data-theme="cyberpunk"] .form-floating > .form-control:focus ~ label {
  color: var(--fg) !important;
  opacity: 0.9 !important;
}

/* Ensure non-dimmed typing across plain inputs (outside Bootstrap .form-control) */
[data-theme="retro"] input[type="text"],
[data-theme="retro"] input[type="search"],
[data-theme="retro"] input[type="email"],
[data-theme="retro"] input[type="password"],
[data-theme="retro"] input[type="number"],
[data-theme="retro"] input[type="tel"],
[data-theme="retro"] input[type="url"],
[data-theme="retro"] textarea,
[data-theme="cyberpunk"] input[type="text"],
[data-theme="cyberpunk"] input[type="search"],
[data-theme="cyberpunk"] input[type="email"],
[data-theme="cyberpunk"] input[type="password"],
[data-theme="cyberpunk"] input[type="number"],
[data-theme="cyberpunk"] input[type="tel"],
[data-theme="cyberpunk"] input[type="url"],
[data-theme="cyberpunk"] textarea {
  color: var(--fg) !important;
  -webkit-text-fill-color: var(--fg);
  caret-color: var(--fg);
  opacity: 1 !important;
  background: var(--input-bg);
  border-color: var(--input-border);
}

[data-theme="retro"] input[type="text"]:focus,
[data-theme="retro"] input[type="search"]:focus,
[data-theme="retro"] input[type="email"]:focus,
[data-theme="retro"] input[type="password"]:focus,
[data-theme="retro"] input[type="number"]:focus,
[data-theme="retro"] input[type="tel"]:focus,
[data-theme="retro"] input[type="url"]:focus,
[data-theme="retro"] textarea:focus,
[data-theme="cyberpunk"] input[type="text"]:focus,
[data-theme="cyberpunk"] input[type="search"]:focus,
[data-theme="cyberpunk"] input[type="email"]:focus,
[data-theme="cyberpunk"] input[type="password"]:focus,
[data-theme="cyberpunk"] input[type="number"]:focus,
[data-theme="cyberpunk"] input[type="tel"]:focus,
[data-theme="cyberpunk"] input[type="url"]:focus,
[data-theme="cyberpunk"] textarea:focus {
  color: var(--fg) !important;
  -webkit-text-fill-color: var(--fg);
  caret-color: var(--fg);
}

/* Placeholder color for plain inputs (non-Bootstrap) */
[data-theme="retro"] input::placeholder,
[data-theme="retro"] textarea::placeholder,
[data-theme="cyberpunk"] input::placeholder,
[data-theme="cyberpunk"] textarea::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
}

/* Maintain dimmed placeholders on focus for plain inputs */
[data-theme="retro"] input:focus::placeholder,
[data-theme="retro"] textarea:focus::placeholder,
[data-theme="cyberpunk"] input:focus::placeholder,
[data-theme="cyberpunk"] textarea:focus::placeholder {
  color: var(--muted) !important;
  opacity: 1 !important;
}

.btn-primary {
  --bs-btn-bg: var(--primary);
  --bs-btn-border-color: var(--primary);
  --bs-btn-hover-bg: color-mix(in srgb, var(--primary) 85%, white);
  --bs-btn-hover-border-color: color-mix(in srgb, var(--primary) 85%, white);
  text-shadow: none;
  box-shadow: var(--glow);
}
.btn-primary:focus { box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--primary) 35%, transparent), var(--glow); }

.pagination .page-link { color: var(--fg); background: var(--card); border-color: var(--card-border); }
.pagination .page-link:hover { background: var(--table-stripe); }

.alert { color: var(--fg); background: var(--card); border-color: var(--card-border); }

.tooltip-inner { color: var(--fg); background: var(--card); }

/* Navbar actions alignment tweaks */
.navbar-actions { display: flex; align-items: center; gap: 10px; }
.navbar-actions .theme-select, .navbar-actions .language-select {
  max-width: 170px; width: auto; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-left: 4px;
}

@media (max-width: 576px) {
  .navbar-actions { gap: 6px; }
  .navbar-actions .theme-select, .navbar-actions .language-select { max-width: 150px; }
}
